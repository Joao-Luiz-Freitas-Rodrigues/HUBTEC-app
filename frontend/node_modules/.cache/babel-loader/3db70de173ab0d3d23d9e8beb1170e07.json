{"ast":null,"code":"import { takeLatest, put, call } from 'redux-saga/effects';\nimport axios from 'axios';\nconst base_url = 'http://localhost:3001'; //CONSULTA TODAS AS TASKS DE UM USUÁRIO ESPECÍFICO\n\nfunction getTasks(id) {\n  return axios({\n    method: 'GET',\n    url: \"\".concat(base_url, \"/tasks\"),\n    headers: {\n      user_id: id\n    }\n  });\n} //CONJUNTO DE FUNÇÕES PARA VALIDAÇÃO DE USUÁRIO\n\n\nfunction getUser(user) {\n  return axios({\n    method: 'POST',\n    url: \"\".concat(base_url, \"/authenticate\"),\n    data: {\n      email: user.email,\n      password: user.password\n    }\n  });\n}\n\nfunction* asyncLogIn(action) {\n  try {\n    const response = yield call(getUser, action.payload);\n    yield put({\n      type: 'LOG_IN',\n      payload: response.data\n    }); //PRÉ CARREGA A LISTA DE TASKS DO USUÁRIO\n\n    const task = yield call(getTasks, response.data._id);\n    console.log(task.data);\n    yield put({\n      type: 'TASK_LIST',\n      payload: task.data\n    });\n  } catch (e) {\n    const message = e.response.data.error;\n    yield put({\n      type: 'ERRO_LOGIN',\n      payload: message\n    }); //LIMPA A MENSAGEM DO TOAST\n\n    yield put({\n      type: 'CLEAR_MESSAGE'\n    });\n  }\n} // AÇÕES RELACIONADAS AS TASKS\n\n\nexport default function* root() {\n  yield takeLatest('ASYNC_LOG_IN', asyncLogIn);\n}","map":{"version":3,"sources":["/Users/mac/Documents/workspace/react/frontend/src/store/sagas.js"],"names":["takeLatest","put","call","axios","base_url","getTasks","id","method","url","headers","user_id","getUser","user","data","email","password","asyncLogIn","action","response","payload","type","task","_id","console","log","e","message","error","root"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,EAA0BC,IAA1B,QAAsC,oBAAtC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,QAAQ,GAAG,uBAAjB,C,CAEA;;AACA,SAASC,QAAT,CAAkBC,EAAlB,EAAqB;AACjB,SAAOH,KAAK,CAAC;AACTI,IAAAA,MAAM,EAAC,KADE;AAETC,IAAAA,GAAG,YAAIJ,QAAJ,WAFM;AAGTK,IAAAA,OAAO,EAAC;AACJC,MAAAA,OAAO,EAACJ;AADJ;AAHC,GAAD,CAAZ;AAOH,C,CAED;;;AACA,SAASK,OAAT,CAAiBC,IAAjB,EAAsB;AAElB,SAAOT,KAAK,CAAC;AACTI,IAAAA,MAAM,EAAE,MADC;AAETC,IAAAA,GAAG,YAAIJ,QAAJ,kBAFM;AAGTS,IAAAA,IAAI,EAAC;AACDC,MAAAA,KAAK,EAACF,IAAI,CAACE,KADV;AAEDC,MAAAA,QAAQ,EAAEH,IAAI,CAACG;AAFd;AAHI,GAAD,CAAZ;AAQH;;AAED,UAAUC,UAAV,CAAqBC,MAArB,EAA4B;AAExB,MAAG;AACC,UAAMC,QAAQ,GAAG,MAAMhB,IAAI,CAACS,OAAD,EAAUM,MAAM,CAACE,OAAjB,CAA3B;AAEA,UAAMlB,GAAG,CAAC;AAAEmB,MAAAA,IAAI,EAAE,QAAR;AAAkBD,MAAAA,OAAO,EAAED,QAAQ,CAACL;AAApC,KAAD,CAAT,CAHD,CAKC;;AACA,UAAMQ,IAAI,GAAG,MAAMnB,IAAI,CAACG,QAAD,EAAWa,QAAQ,CAACL,IAAT,CAAcS,GAAzB,CAAvB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACR,IAAjB;AAEA,UAAMZ,GAAG,CAAC;AAACmB,MAAAA,IAAI,EAAE,WAAP;AAAoBD,MAAAA,OAAO,EAAEE,IAAI,CAACR;AAAlC,KAAD,CAAT;AAEH,GAXD,CAWE,OAAMY,CAAN,EAAQ;AACN,UAAMC,OAAO,GAAGD,CAAC,CAACP,QAAF,CAAWL,IAAX,CAAgBc,KAAhC;AACA,UAAM1B,GAAG,CAAC;AAACmB,MAAAA,IAAI,EAAC,YAAN;AAAoBD,MAAAA,OAAO,EAAEO;AAA7B,KAAD,CAAT,CAFM,CAGN;;AACA,UAAMzB,GAAG,CAAC;AAACmB,MAAAA,IAAI,EAAC;AAAN,KAAD,CAAT;AACH;AAGJ,C,CAED;;;AAEA,eAAe,UAAUQ,IAAV,GAAgB;AAE3B,QAAM5B,UAAU,CAAC,cAAD,EAAiBgB,UAAjB,CAAhB;AAEH","sourcesContent":["import { takeLatest, put, call } from 'redux-saga/effects'; \nimport axios from 'axios';\n\nconst base_url = 'http://localhost:3001'\n\n//CONSULTA TODAS AS TASKS DE UM USUÁRIO ESPECÍFICO\nfunction getTasks(id){\n    return axios({\n        method:'GET',\n        url:`${base_url}/tasks`,\n        headers:{\n            user_id:id\n        }\n    })\n}\n\n//CONJUNTO DE FUNÇÕES PARA VALIDAÇÃO DE USUÁRIO\nfunction getUser(user){\n    \n    return axios({\n        method: 'POST',\n        url:`${base_url}/authenticate`,\n        data:{\n            email:user.email,\n            password: user.password\n        }\n    })\n}\n\nfunction* asyncLogIn(action){\n\n    try{\n        const response = yield call(getUser, action.payload);        \n\n        yield put({ type: 'LOG_IN', payload: response.data});\n\n        //PRÉ CARREGA A LISTA DE TASKS DO USUÁRIO\n        const task = yield call(getTasks, response.data._id);\n        console.log(task.data);\n        \n        yield put({type: 'TASK_LIST', payload: task.data});\n        \n    } catch(e){\n        const message = e.response.data.error;\n        yield put({type:'ERRO_LOGIN', payload: message});\n        //LIMPA A MENSAGEM DO TOAST\n        yield put({type:'CLEAR_MESSAGE'});\n    }\n    \n    \n}\n\n// AÇÕES RELACIONADAS AS TASKS\n\nexport default function* root(){ \n    \n    yield takeLatest('ASYNC_LOG_IN', asyncLogIn)\n    \n}\n"]},"metadata":{},"sourceType":"module"}